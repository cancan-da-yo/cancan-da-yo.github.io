document.addEventListener("DOMContentLoaded", function() {
    let colorScheme = localStorage.getItem('color-scheme');

    if (!colorScheme) {
        // 如果没有存储的偏好，使用系统默认设置
        const prefersDarkScheme = window.matchMedia("(prefers-color-scheme: dark)").matches;
        colorScheme = prefersDarkScheme ? 'dark' : 'light';
        localStorage.setItem('color-scheme', colorScheme);
    }

    document.documentElement.setAttribute('data-scheme', colorScheme);

    // 切换按钮逻辑
    const toggleButton = document.getElementById('scheme-toggle');
    if (toggleButton) {
        toggleButton.addEventListener('click', function() {
            let currentScheme = document.documentElement.getAttribute('data-scheme');
            let newScheme = currentScheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-scheme', newScheme);
            localStorage.setItem('color-scheme', newScheme);
        });
    }
});
